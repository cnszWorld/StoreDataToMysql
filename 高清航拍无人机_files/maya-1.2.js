(function(e){var r={};var n=window.navigator;var t=+new Date;var a=true;var o=1e3*60*10;var i={};var u=false;window.jsreport=window.maya=function(){var f={bid:102};var s=function(e,o,i,u,m){if(!a)return false;var d=s.bid||f.bid;u=Number(u)||4;if(!r.info){r.info={};r.info.userAgent=n.userAgent;r.info.platform=n.platform;r.info.appCodeName=n.appCodeName;r.info.appName=n.appName;r.info.appVersion=n.appVersion}var v=r.info;var g=v&&["|_|browser:[","agent:"+v.userAgent,",plat:"+v.platform,",appcode:"+v.appCodeName,",appname:"+v.appName,",appversion:"+v.appVersion+"]","|_|"+"st:"+(+new Date-t)].join("")||"";var y=s.reportUrl||location.href;setTimeout(function(){if(typeof e=="object"&&e.toString){var r=e.toString();if(r.indexOf("[object event]")>-1){e=l(e)}}var n="type="+m+"&level="+u+"&bid="+d+"&surl="+encodeURIComponent(y)+"&referer="+encodeURIComponent(document.referrer)+"&msg="+encodeURIComponent(e)+"|_|"+i;if(e!=="v"&&c(n)){return}var t=new Image;var a="https://h5.qianbao.qq.com/maya/report?";t.src=a+n+g+"|_|"+o+"&r="+Math.random();e!=="v"&&p(n)},s.buffTime*1e3)};function p(e){var r=Math.floor(Date.now()/o)*o+"",n=i[r];i={};n?i[r]=n.concat([e]):i[r]=[e]}function c(e){var r=Math.floor(Date.now()/o)*o+"";if(i[r]&&i[r].indexOf(e)>-1){return true}return false}function l(e){var r=[],n=0,t;if(e.toString){r.push(e.toString())}for(t in e){if(n++>30)break;try{if(typeof e[t]=="object"){r.push(t+"="+e[t].toString().replace(/[\n\s\r]/g,""))}else{r.push(t+"="+e[t])}}catch(a){r.push(t+"=read-err#"+a.message)}}return r.join("&")}s.init=function(e,r,n){if(!s.bid&&typeof e=="undefined"){throw"maya缺少bid";return}s.rate=r||100;s.buffTime=n||1;s.bid=e||s.bid;if(Math.random()>s.rate/100){return a=false}this.report("v",s.reportUrl||location.href,0,1,1)};s.setting=function(e,r){e=e||{};s.reportUrl=e.reportUrl;r&&this.report("v",s.reportUrl||location.href,0,1,1)};s.report=function(e,r,n,t,a){if(arguments.length==2){s(e,s.reportUrl||location.href,0,4,r)}else{s(e,r||s.reportUrl||location.href,n||0,t||4,a||2)}};s.trace=function(e){typeof e==="object"&&(e=JSON.stringify(e));if(e.length>5e3){console.warn("上报内容过长，请控制在5000字符以内");return}s(e,null,null,3,0)};s.reportPerformance=function(){if(u===true){return}u=true;var e=null,r=[],n;if(window.performance&&window.performance.getEntries){e=window.performance.getEntries()}if(!e){return}for(n=0;n<e.length;n++){var t=e[n],a={};if(t.initiatorType&&["link","script"].indexOf(t.initiatorType)>-1){a.name=t.name;a.st=Math.ceil(t.startTime)||0;a.reqs=Math.ceil(t.requestStart)||0;a.reps=Math.ceil(t.responseStart)||0;a.repe=Math.ceil(t.responseEnd)||0}a.name&&r.push(a)}this.trace("Performance:"+JSON.stringify({timing:window.performance.timing,entries:r}))};var m=[];var d=function(){var r="";if(arguments.length==1&&typeof arguments[0]=="object"){var n="";if(arguments[0].target){n=arguments[0].target.src}s.apply(e,["oneargs#"+n+"#"+l(arguments[0]),"",0,null,-1])}else{if(arguments[4]&&typeof arguments[4]=="object"){r=(arguments[4].stack||"").replace(/\n/g,"")}m.splice.apply(arguments,[3,0,null,-1]);arguments[0]+="#stack:"+r;s.apply(e,arguments)}};e.onerror=d;var v=function(e,r){for(var n in r){e[n]=r[n]}};var g=function(e){return typeof e==="function"};var y;var w=function(r,n){return function(){try{return r.apply(this,n||arguments)}catch(t){if(!t.reported){t.reported=true;d(t.message,"",0,0,t);if(!y){e.onerror=function(){};y=setTimeout(function(){e.onerror=d;y=null},500)}}throw t}}};var h=function(e){var r,n;for(r in e){n=e[r];if(g(n))e[r]=w(n)}return e};var b=function(e){return function(){var r,n=[];for(var t=0,a=arguments.length;t<a;t++){r=arguments[t];g(r)&&(r=w(r));n.push(r)}return e.apply(this,n)}};var S=function(e,r){return function(){var n,t,a=[];for(var o=0,i=arguments.length;o<i;o++){n=arguments[o];g(n)&&(t=w(n))&&(n.tryWrap=t)&&(n=t);a.push(n)}return e.apply(r||this,a)}};var q=function(e){return function(r,n){if(typeof r==="string"){try{r=new Function(r)}catch(t){throw t}}var a=[].slice.call(arguments,2);var o=w(r,a.length&&a);return e(o,n||0)}};var j={system:false,jquery:false,modules:false,vue:false,zero:false};s.spyJquery=function(){var r=e.$;if(j.jQuery){return s}if(!r||!r.event){return s}var n,t;if(r.zepto){n=r.fn.on,t=r.fn.off;r.fn.on=S(n);r.fn.off=function(){var e,r=[];for(var n=0,a=arguments.length;n<a;n++){e=arguments[n];g(e)&&e.tryWrap&&(e=e.tryWrap);r.push(e)}return t.apply(this,r)}}else if(window.jQuery){n=r.event.add,t=r.event.remove;r.event.add=S(n);r.event.remove=function(){var e,r=[];for(var n=0,a=arguments.length;n<a;n++){e=arguments[n];g(e)&&e.tryWrap&&(e=e.tryWrap);r.push(e)}return t.apply(this,r)}}var a=r.ajax;if(a){r.ajax=function(e,n){if(!n){n=e;e=undefined}h(n);if(e)return a.call(r,e,n);return a.call(r,n)}}j.jQuery=true;return s};s.spyModules=function(){var r=e.require,n=e.define;if(j.modules){return s}if(n&&n.amd&&r){e.require=b(r);v(e.require,r);e.define=b(n);v(e.define,n);j.modules=true}if(e.seajs&&n){e.define=function(){var e,r=[];for(var t=0,a=arguments.length;t<a;t++){e=arguments[t];if(g(e)){e=w(e);e.toString=function(e){return function(){return e.toString()}}(arguments[t])}r.push(e)}return n.apply(this,r)};e.seajs.use=b(e.seajs.use);v(e.define,n);j.modules=true}return s};s.spySystem=function(){if(j.system){return s}j.system=true;e.setTimeout=q(e.setTimeout);e.setInterval=q(e.setInterval);return s};s.spyCustom=function(e){if(g(e)){return w(e)}else{return h(e)}};var _=false;s.spyVue=function(r){var n=e.Vue||r;if(j.vue){return s}if(!n){!_&&console.warn("maya: 没有找到名为Vue的全局变量，请手动调用 maya.spyVue(Vue)");_=true;return}if(+n.version.split(".")[0]<2){!_&&console.warn("maya: 暂只支持 Vue 2.0.0 及以上版本");_=true;return}n.mixin({beforeCreate:function(){var e=this.$options,r=["watch","computed","methods","beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],n=r.length;for(var t=0;t<n;t++){e[r[t]]&&h(e[r[t]])}}});j.vue=true;return s};s.spyZero=function(){if(!window.qv||!window.qv.zero||!window.qv.zero.Page||!window.qv.zero.Http){return}if(j.zero){return s}var e=qv.zero.Page,r=qv.zero.Http;qv.zero.Page=function(r){h(r);return new e(r)};r.send&&(r.send=b(r.send));r.SSOSend&&(r.SSOSend=b(r.SSOSend));r.loadScript&&(r.loadScript=b(r.loadScript));j.zero=true;return s};return s}()})(window);(function(){var e=a("monitor_try"),r=window.pluginData&&window.pluginData.bid,n=window.pluginData&&window.pluginData.rate;function t(e,r){var n=document.createElement("script");n.src=e;n.crossOrigin="";n.onload=r||function(){};document.head.appendChild(n)}function a(e,r){var n="[?&]"+e+"=([^&#]*)[&#]?",t=new RegExp(r?"(?:(?:/maya[-\\.\\d]*\\.js)|(?:qianbao.qq.com/plugin)).*"+n:n,"i"),a=t.exec(r||location.search);return a?a[1]:""}function o(){e=+e;if(!e){return}(e&1)===1&&maya.spySystem();(e&2)===2&&maya.spyJquery();(e&4)===4&&maya.spyModules();(e&8)===8&&maya.spyVue();(e&16)===16&&maya.spyZero()}function i(){var i=document.getElementsByTagName("script"),u;for(var f=0,s=i.length;f<s;f++){u=i[f].src;a("rpt_bid",u)&&(r=a("rpt_bid",u));a("rate",u)&&(n=a("rate",u));a("monitor_try",u)&&(e=a("monitor_try",u))}r&&(maya.init(r,n),o());if(a("maya_vconsole")==="1"||(+a("debug")&2)===2||document.cookie.indexOf("maya_vconsole")>-1){t("//i.gtimg.cn/channel/lib/vconsole/vconsole.min.js?_bid=3344&max_age=86400000",function(){new VConsole})}}window.addEventListener&&document.addEventListener("load",o,true);var u=window.onload;window.onload=function(){u&&u();if(window.performance&&Date.now()-performance.timing.navigationStart>3e3){maya.reportPerformance()}u&&(window.onload=u,u())};i()})();